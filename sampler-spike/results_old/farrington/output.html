<!DOCTYPE html>
<meta charset="utf-8">
<style>
body {
	font: 10px sans-serif;
}

.axis path, .axis line {
	fill: none;
	stroke: #000;
	shape-rendering: crispEdges;
}

.x.axis path {
	display: none;
}

.line {
	fill: none;
	stroke-width: 1.5px;
}
</style>
	<script type="text/javascript">
		var jsonData = {
  "source":"file:/home/per024/ENVIRONMENT/workspaces/Sampler/sampler-spike/bin/farrington/input.txt",
  "month":["2014-12","2014-11","2014-10","2014-09","2014-08","2014-07","2014-06","2014-05","2014-04","2014-03","2014-02","2014-01","2013-12","2013-11","2013-10","2013-09","2013-08","2013-07","2013-06","2013-05","2013-04","2013-03","2013-02","2013-01","2012-12","2012-11","2012-10","2012-09","2012-08","2012-07","2012-06","2012-05","2012-04","2012-03","2012-02","2012-01","2011-12","2011-11","2011-10","2011-09","2011-08","2011-07","2011-06","2011-05","2011-04","2011-03","2011-02","2011-01","2010-12","2010-11","2010-10","2010-09","2010-08","2010-07","2010-06","2010-05","2010-04","2010-03","2010-02","2010-01","2009-12","2009-11","2009-10","2009-09","2009-08","2009-07","2009-06","2009-05","2009-04","2009-03","2009-02","2009-01","2008-12","2008-11","2008-10","2008-09","2008-08","2008-07","2008-06","2008-05","2008-04","2008-03","2008-02","2008-01","2007-12","2007-11","2007-10","2007-09","2007-08","2007-07","2007-06","2007-05","2007-04","2007-03","2007-02","2007-01","2006-12","2006-11","2006-10","2006-09","2006-08","2006-07","2006-06","2006-05","2006-04","2006-03","2006-02","2006-01","2005-12","2005-11","2005-10","2005-09","2005-08","2005-07","2005-06","2005-05","2005-04","2005-03","2005-02","2005-01","2004-12","2004-11","2004-10","2004-09","2004-08","2004-07","2004-06","2004-05","2004-04","2004-03","2004-02","2004-01","2003-12","2003-11","2003-10","2003-09","2003-08","2003-07","2003-06","2003-05","2003-04","2003-03","2003-02","2003-01","2002-12"],
  "monthId":[263,262,261,260,259,258,257,256,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228,227,226,225,224,223,222,221,220,219,218,217,216,215,214,213,212,211,210,209,208,207,206,205,204,203,202,201,200,199,198,197,196,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,180,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,164,163,162,161,160,159,158,157,156,155,154,153,152,151,150,149,148,147,146,145,144,143,142,141,140,139,138,137,136,135,134,133,132,131,130,129,128,127,126,125,124,123,122,121,120,119],
  "expected":[28.0608153333195,30.5885265493237,37.8400527099111,34.7758901680254,29.5503135929436,20.1111985174691,18.559920808461,22.2036831331806,22.9985191485069,22.9910635951856,23.4151617527375,23.9565170320821,31.7574067386851,39.4857279702021,49.6875,47.0625000000019,40.6875000000447,32.93750000003,30.9375000000141,29.6250000000003,30.0,28.8125,30.7500000000001,35.6250000000021,40.6875000000006,46.8750000000003,49.8125,56.8402151624162,41.8750000000062,34.8125000000022,32.1250000000018,36.3447338068899,35.077700576962,36.459441610425,31.125,36.0625000000006,41.5000000000007,49.6250000000018,52.5625000000001,50.3125000000002,56.085606305083,44.2706799256479,43.579510240113,29.8125000000007,30.2500000000004,29.5625000000001,32.4375,37.0000000000007,45.7500000000279,53.7500000000649,57.1250000000037,54.3750000000071,43.6875000000049,37.0625000000564,31.4375,30.7500000000015,30.3750000000004,29.7500000000001,31.8125,35.8125000000001,47.5000000005402,36.4541966352479,40.2558672676428,37.663198430537,32.1835399762195,26.8535244198672,22.5473961981398,17.0318788016517,19.4066802222628,20.3312037320496,22.5475244922616,25.6101173286919,30.3519868231239,33.2114518470719,36.8310650210637,38.718602248248,30.1864264944735,23.6661924669623,19.6614541169827,22.0610049949443,23.1415520033526,22.6755706654063,24.7191304239397,27.4329979475258,37.3921026163995,47.523742006394,59.7659054223908,56.1646540608487,44.6996249175977,35.3823026212937,31.277406487225,33.8533294587551,42.1875000000025,40.9375000000008,41.3125000000007,46.2000000000013,61.3571428573118,64.4878266637607,78.4736033964731,72.6736368649016,79.5384615388929,63.3076923082272,54.5384615386338,50.23076923078,45.6153846153846,43.1538461538465,42.6923076923087,47.9230769230775,65.0769230769833,91.3846153846922,110.384615384616,102.769230769238,85.3076923077412,65.2307692307795,54.3076923079315,68.1331605707152,41.538461538626,57.5388507062668,53.576162225745,46.384615384619,62.000000000047,88.6923076925311,128.450267146564,146.580986114366,121.904093057951,58.8461538500286,85.9721453915564,77.4080150051526,35.6923076931741,57.4327668632862,35.4615384630913,60.650940635755,74.2186060011517,101.483700547475,141.568200106779,143.898582244929,107.831636626479,86.0268448275271,71.3453462894366,54.005329932392,43.5815186744866,43.0349883377064,42.0309749848609,44.3110788200571,46.8461538494826],
  "threshold":[43.7542079161813,47.1500259443774,52.8703684512945,56.2556440565819,56.1920987711493,34.9951602639566,27.6169551078179,32.8307086888009,35.3940367969095,34.116832306618,33.5149288658795,35.9952749891627,45.6440436483382,60.0796063842558,73.3300625256272,75.4748046722528,71.7361349182525,58.1508029981211,54.1697525909412,46.4066367824404,45.3389250424797,43.3941718261421,46.5003842495232,58.5134808113837,63.9743805351985,72.3271833009752,74.058937982983,79.4123298569814,70.0072992972683,56.867225961553,53.1165994668817,53.7791380457407,51.8682028632718,50.1117302334706,46.2589437355299,57.6107288095006,65.842530234163,79.347922567269,78.9515599520188,77.2294582562004,78.5665602070797,63.5435728585655,60.6615391322672,47.6949094481751,47.41598541638,45.039516026806,47.3472469593902,58.992007749401,80.9068311989548,95.7673022735506,93.7665851551576,91.3549082236695,73.095130029429,60.1416493282777,47.5113732583145,50.0534062968893,47.335196538825,45.6760953884089,45.03511177227,54.7938147478579,93.0950565509362,66.952732400787,66.8647310715761,63.4075683880644,60.3790476661965,51.6054222460882,38.4689517796775,25.7332810991286,29.188043850838,30.4033967069627,32.4691957898457,37.7224896965731,62.3099037578913,64.759412869652,57.8949131445323,73.198335625551,62.264753951602,46.6867238946773,36.2024731450521,33.0225683551139,33.2151422326274,32.6238740996654,35.079348207415,38.315720116224,71.9582175629622,92.9901559701291,96.783074728661,104.534204799637,95.1317688847899,72.9034359344734,65.2230384532676,53.0020673546004,68.1709913417669,65.0428936349617,65.2158953773625,74.0251667900759,112.561260495149,116.229446492423,121.389286276734,128.049798071246,149.614254447243,118.46349826433,102.264322600013,87.1886805118046,66.9562616782793,66.929946712899,67.9600787260882,74.9616816490903,115.952808794122,161.708804120405,159.975781039067,169.527932364238,149.343494060461,110.533390505284,102.753601779897,110.804039859933,75.1500009027763,88.4221978970411,83.3312616570785,76.3706581334917,110.334975296119,162.677500752518,189.363002082398,211.362417961889,197.217190172506,119.273417291472,122.314705931668,105.852854313123,70.2928724320234,80.0121818988009,71.4881854238603,92.9718267082309,128.613720175182,170.427725356745,196.240320560506,192.617745381956,163.922806402991,115.031469928678,100.849740089892,70.1530969667145,60.2366077387706,62.6941446020839,64.1678789222351,76.4262828586255,97.4467924904306],
  "actual":[23,19,34,32,29,20,19,18,13,16,23,26,39,51,42,45,31,20,20,25,31,22,21,29,27,32,35,43,19,18,23,27,24,31,21,30,35,54,54,54,41,25,32,25,33,31,32,35,48,44,61,71,50,56,36,47,39,38,41,44,58,55,69,53,43,40,40,34,26,31,30,39,52,47,38,43,34,30,20,22,21,20,21,27,28,28,47,44,37,30,25,29,17,25,30,33,29,62,74,51,36,21,28,31,37,34,32,42,51,89,89,64,77,46,30,41,44,35,35,34,46,95,88,100,63,57,54,60,53,46,52,51,62,103,164,146,94,99,97,56,54,60,55,58,73]
}
	</script>
<body>
	<script src="http://d3js.org/d3.v3.js"></script>
	<script>
		var margin = 
			{top : 20, right : 80, bottom : 30, left : 50}, 
			width = 800 - margin.left - margin.right, 
			height = 300 - margin.top - margin.bottom;

		var parseYearMonth = d3.time.format("%Y-%m").parse;

		var x = d3.time.scale().range([ 0, width ]);
		var y = d3.scale.linear().range([ height, 0 ]);

		var xAxis = d3.svg.axis().scale(x).orient("bottom");
		var yAxis = d3.svg.axis().scale(y).orient("left");

		var line = d3.svg.line()
			.x(function(d) {return x(d.x);})
			.y(function(d) {return y(d.y);});

		var svg = d3.select("body")
			.append("svg")
			.attr("width",width + margin.left + margin.right)
			.attr("height",height + margin.top + margin.bottom)
			.append("g")
			.attr("transform","translate(" + margin.left + "," + margin.top + ")");

		var colour = d3.scale.category10();

		jsonData.month.forEach(function(d, i) {
			jsonData.month[i] = parseYearMonth(d)
		});

		var lines = [ "actual", "threshold" ];

		var linesData = lines.map(function(name) {
			return {
				"name" : name,
				"values" : jsonData["month"].map(function(month, index) {
					return {
						y : jsonData[name][index],
						x : month
					};
				})
			};
		});
		
		linesData.forEach(function(d) {
			d.values.sort();
			d.values.reverse();
		});

		x.domain(d3.extent(jsonData.month));
		y.domain(d3.extent(jsonData.actual.concat(jsonData.threshold)));

		svg.append("g")
			.attr("class", "x axis")
			.attr("transform","translate(0," + height + ")")
			.call(xAxis);

		svg.append("g")
			.attr("class", "y axis")
			.call(yAxis)
			.append("text")
			.attr("transform", "rotate(-90)")
			.attr("y", 6)
			.attr("dy",".71em")
			.style("text-anchor", "end")
			.text("Value");

		var linePlots = svg.selectAll(".path")
			.data(linesData)
			.enter()
			.append("g")
			
		linePlots.append("path")
			.attr("class", "line")
			.attr("d", function(d) {
				return line(d.values);
			})
			.attr("stroke", function(d) {
				return colour(d.name);
			});
		
		linePlots.append("text")
			.datum(function(d) {
				return {name: d.name, value: d.values[d.values.length - 1]}; })
			.attr("transform", function(d) { 
				return "translate(" + x(d.value.x) + "," + y(d.value.y) + ")"; })
			.attr("x", 3)
			.attr("dy", ".35em")
			.text(function(d) {return d.name; })
	</script>
</body>